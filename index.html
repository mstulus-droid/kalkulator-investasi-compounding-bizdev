<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator Investasi Bizdev</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f1f5f9;
        }

        /* Tema Hitam Profesional */
        .gradient-header {
            background: linear-gradient(135deg, #1e293b 0%, #020617 100%);
        }

        .btn-shadow {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        /* Focus state disesuaikan ke warna gelap */
        input:focus {
            outline: none;
            border-color: #0f172a;
            box-shadow: 0 0 0 3px rgba(15, 23, 42, 0.1);
        }

        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05);
        }

        .table-container {
            max-height: 60vh;
            overflow-y: auto;
        }

        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Custom Scrollbar for dark theme */
        .table-container::-webkit-scrollbar {
            width: 4px;
        }
        .table-container::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 10px;
        }
    </style>
</head>
<body class="text-slate-800">

    <div id="app" class="max-w-md mx-auto min-h-screen bg-white shadow-xl relative overflow-hidden">
        
        <!-- Header dengan Tema Hitam & Logo SVG Reconstructed -->
        <header class="gradient-header text-white p-4 sticky top-0 z-50 shadow-md">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <button id="backBtn" class="hidden hover:bg-white/10 p-2 rounded-full transition">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <div class="flex items-center gap-3">
                        <!-- Reconstructed Logo Bizdev (SVG) -->
                        <div class="relative w-10 h-10 flex items-center justify-center">
                            <svg viewBox="0 0 100 100" class="w-full h-full">
                                <circle cx="50" cy="50" r="45" fill="none" stroke="white" stroke-width="4" />
                                <text x="50" y="58" font-family="Arial" font-weight="900" font-size="32" fill="white" text-anchor="middle">BD</text>
                            </svg>
                        </div>
                        
                        <!-- Title & Subtitle -->
                        <div class="flex flex-col">
                            <div class="flex items-baseline gap-2">
                                <h1 id="pageTitle" class="font-bold text-base leading-tight">Kalkulator Bunga Majemuk</h1>
                            </div>
                            <span id="pageSubtitle" class="text-[8px] opacity-70 font-light tracking-[0.1em] uppercase">Compounding Interest Calculator</span>
                        </div>
                    </div>
                </div>
                <div class="text-[9px] opacity-50 italic text-right hidden sm:block">Bizdev WM</div>
            </div>
        </header>

        <!-- View 1: Input & Results -->
        <main id="calculatorView" class="p-5 fade-in">
            <div class="space-y-4 mb-8">
                <div>
                    <label class="block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1">Setoran Awal (Modal)</label>
                    <div class="relative">
                        <span class="absolute left-3 top-2.5 text-slate-400 text-sm font-bold">Rp</span>
                        <input type="text" id="principal" placeholder="0" oninput="handleCurrencyInput(this)" class="w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-lg transition font-semibold bg-slate-50">
                    </div>
                </div>

                <div>
                    <label class="block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1">Simpanan Bulanan</label>
                    <div class="relative">
                        <span class="absolute left-3 top-2.5 text-slate-400 text-sm font-bold">Rp</span>
                        <input type="text" id="monthlyDeposit" placeholder="300.000" oninput="handleCurrencyInput(this)" class="w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-lg transition font-semibold bg-slate-50">
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1">Jangka Waktu (Bulan)</label>
                        <input type="number" id="period" placeholder="6" class="w-full px-4 py-2.5 border border-slate-200 rounded-lg transition font-semibold bg-slate-50">
                    </div>
                    <div>
                        <label class="block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1">Bunga Tahunan (%)</label>
                        <input type="number" step="0.1" id="rate" placeholder="1.3" class="w-full px-4 py-2.5 border border-slate-200 rounded-lg transition font-semibold bg-slate-50">
                    </div>
                </div>

                <div>
                    <label class="block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1">Metode Penggandaan (Compounding)</label>
                    <select id="compounding" class="w-full px-4 py-2.5 border border-slate-200 rounded-lg bg-slate-50 transition cursor-pointer font-semibold">
                        <option value="12">Bulanan</option>
                        <option value="4">Kuartalan</option>
                        <option value="1">Tahunan</option>
                    </select>
                </div>
            </div>

            <!-- Action Buttons - Black Theme -->
            <div class="grid grid-cols-2 gap-4 mb-8">
                <button onclick="resetCalculator()" class="py-3 px-4 bg-slate-100 text-slate-600 font-bold rounded-xl hover:bg-slate-200 transition btn-shadow text-sm">
                    RESET
                </button>
                <button onclick="calculate()" class="py-3 px-4 bg-slate-900 text-white font-bold rounded-xl hover:bg-black transition btn-shadow text-sm uppercase tracking-wide">
                    Hitung Sekarang
                </button>
            </div>

            <!-- Result Card -->
            <div id="resultCard" class="hidden card p-6 border-t-4 border-slate-900 fade-in">
                <h3 class="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-5 text-center">Summary Investasi</h3>
                <div class="space-y-4">
                    <div class="flex justify-between items-center border-b border-slate-100 pb-2">
                        <span class="text-slate-500 text-xs font-medium">Total Modal</span>
                        <span id="resTotalPrincipal" class="font-bold text-slate-800 text-right">-</span>
                    </div>
                    <div class="flex justify-between items-center border-b border-slate-100 pb-2">
                        <span class="text-slate-500 text-xs font-medium">Total Bunga</span>
                        <span id="resInterestAmount" class="font-bold text-emerald-600 text-right">-</span>
                    </div>
                    <div class="flex justify-between items-center border-b border-slate-100 pb-2">
                        <span class="text-slate-500 text-xs font-medium">Estimasi Hasil</span>
                        <span id="resMaturityValue" class="font-black text-slate-900 text-lg text-right">-</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-slate-500 text-xs font-medium">Bunga Efektif (APY)</span>
                        <span id="resAPY" class="font-bold text-blue-600 text-right">-</span>
                    </div>
                </div>

                <button onclick="showTableView()" class="w-full mt-8 py-3.5 px-4 bg-slate-800 text-white font-bold rounded-xl hover:bg-black transition flex items-center justify-center gap-2 text-sm">
                    <i class="fas fa-list-ul"></i> RINCIAN PER BULAN
                </button>
            </div>

            <!-- Branding Footer -->
            <div class="mt-16 text-center opacity-40 hover:opacity-100 transition-all duration-500 group cursor-default">
                <div class="text-xl font-black tracking-tighter text-slate-900 group-hover:tracking-normal transition-all">BIZDEV WM</div>
                <div class="text-[7px] uppercase tracking-[0.4em] font-bold text-slate-500">Imagination Unlimited</div>
            </div>
        </main>

        <!-- View 2: Table View -->
        <main id="tableView" class="hidden p-0 fade-in">
            <div class="bg-slate-900 p-3 flex justify-between text-[10px] font-black uppercase text-slate-400 tracking-wider">
                <span class="w-10 text-center">Bln</span>
                <span class="flex-1 text-center">Bunga</span>
                <span class="flex-1 text-center">Akumulasi</span>
                <span class="flex-1 text-center">Saldo</span>
            </div>
            <div id="tableBody" class="table-container bg-white"></div>
        </main>
    </div>

    <script>
        const views = {
            calc: document.getElementById('calculatorView'),
            table: document.getElementById('tableView')
        };
        const title = document.getElementById('pageTitle');
        const subtitle = document.getElementById('pageSubtitle');
        const backBtn = document.getElementById('backBtn');
        const tableBody = document.getElementById('tableBody');

        let calculationData = [];

        function formatThousands(value) {
            if (!value) return "";
            let val = value.replace(/\D/g, "");
            return val.replace(/\B(?=(\d{3})+(?!\d))/g, ".");
        }

        function unformatCurrency(value) {
            return parseFloat(value.replace(/\./g, "")) || 0;
        }

        function handleCurrencyInput(input) {
            const originalValue = input.value;
            const formatted = formatThousands(originalValue);
            input.value = formatted;
        }

        function formatRupiah(number) {
            return new Intl.NumberFormat('id-ID', {
                style: 'currency',
                currency: 'IDR',
                minimumFractionDigits: 2
            }).format(number);
        }

        function calculate() {
            const P = unformatCurrency(document.getElementById('principal').value);
            const PMT = unformatCurrency(document.getElementById('monthlyDeposit').value);
            const months = parseInt(document.getElementById('period').value) || 0;
            const annualRate = (parseFloat(document.getElementById('rate').value) || 0) / 100;
            const compoundingFrequency = parseInt(document.getElementById('compounding').value);

            if (months <= 0) {
                alert("Masukkan jangka waktu investasi Anda.");
                return;
            }

            const monthlyRate = annualRate / 12;
            let currentBalance = P;
            let totalPrincipal = P;
            let totalInterest = 0;
            calculationData = [];

            for (let i = 1; i <= months; i++) {
                const previousBalance = currentBalance;
                const balanceWithDeposit = previousBalance + PMT;
                const interestEarned = balanceWithDeposit * monthlyRate;
                
                currentBalance = balanceWithDeposit + interestEarned;
                totalPrincipal += PMT;
                totalInterest += interestEarned;

                calculationData.push({
                    month: i,
                    monthlyInterest: interestEarned,
                    totalInterest: totalInterest,
                    balance: currentBalance
                });
            }

            document.getElementById('resTotalPrincipal').innerText = formatRupiah(totalPrincipal);
            document.getElementById('resInterestAmount').innerText = formatRupiah(totalInterest);
            document.getElementById('resMaturityValue').innerText = formatRupiah(currentBalance);
            
            const apy = (Math.pow(1 + (annualRate / compoundingFrequency), compoundingFrequency) - 1) * 100;
            document.getElementById('resAPY').innerText = apy.toFixed(4) + "%";

            document.getElementById('resultCard').classList.remove('hidden');
            document.getElementById('resultCard').scrollIntoView({ behavior: 'smooth', block: 'end' });
        }

        function resetCalculator() {
            document.getElementById('principal').value = '';
            document.getElementById('monthlyDeposit').value = '';
            document.getElementById('period').value = '';
            document.getElementById('rate').value = '';
            document.getElementById('resultCard').classList.add('hidden');
            calculationData = [];
        }

        function showTableView() {
            if (calculationData.length === 0) return;

            tableBody.innerHTML = '';
            calculationData.forEach((row, index) => {
                const rowEl = document.createElement('div');
                rowEl.className = `flex justify-between text-[11px] p-4 border-b border-slate-50 ${index % 2 === 0 ? 'bg-white' : 'bg-slate-50/50'}`;
                rowEl.innerHTML = `
                    <span class="w-10 text-slate-400 font-bold text-center">${row.month}</span>
                    <span class="flex-1 text-emerald-600 text-center font-medium">${row.monthlyInterest.toLocaleString('id-ID', {minimumFractionDigits: 0})}</span>
                    <span class="flex-1 text-slate-500 text-center">${row.totalInterest.toLocaleString('id-ID', {minimumFractionDigits: 0})}</span>
                    <span class="flex-1 text-slate-900 font-bold text-center">${row.balance.toLocaleString('id-ID', {minimumFractionDigits: 0})}</span>
                `;
                tableBody.appendChild(rowEl);
            });

            views.calc.classList.add('hidden');
            views.table.classList.remove('hidden');
            backBtn.classList.remove('hidden');
            title.innerText = 'Rincian Per Bulan';
            subtitle.innerText = 'Detailed Monthly Breakdown';
        }

        backBtn.onclick = () => {
            views.calc.classList.remove('hidden');
            views.table.classList.add('hidden');
            backBtn.classList.add('hidden');
            title.innerText = 'Kalkulator Bunga Majemuk';
            subtitle.innerText = 'Compounding Interest Calculator';
        };

        window.onload = () => {
            const defaultDeposit = "300000";
            document.getElementById('monthlyDeposit').value = formatThousands(defaultDeposit);
            document.getElementById('period').value = 6;
            document.getElementById('rate').value = 1.3;
        };
    </script>
</body>
</html>
